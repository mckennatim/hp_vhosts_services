{"version":3,"sources":["webpack:///./src/actions/verify.js?ab35"],"names":[],"mappings":"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","file":"0.1e95f3666e82657dbbd5.hot-update.js","sourcesContent":["import fetch from 'isomorphic-fetch'\r\nimport superagent from 'superagent'\r\n\r\nconst reqAddr = (raw) => {\r\n\tconsole.log(raw)\r\n\treturn {\r\n\t\ttype: 'REQ_ADDR',\r\n\t\traw\r\n\t}\r\n}\r\n\r\nconst recAddr = (json) => {\r\n\treturn {\r\n\t\ttype: 'REC_ADDR',\r\n\t\tresults: json\r\n\t}\r\n}\r\n\r\nconst selAddr = (selected) => {\r\n\treturn {\r\n\t\ttype: 'SEL_ADDR',\r\n\t\tselected\r\n\t}\r\n}\r\nconst setDone = (done) => {\r\n\treturn {\r\n\t\ttype: 'SET_DONE',\r\n\t\tdone\r\n\t}\r\n}\r\n\r\nconst fetchAddr = (raw) => {\r\n\treturn dispatch => {\r\n\t\tdispatch(reqAddr(raw))\r\n\t  const eraw = `?address=`+raw.split(' ').join('+')+`&sensor=false`\r\n\t  const url = `http://maps.googleapis.com/maps/api/geocode/json`\r\n\t  console.log(url+eraw)\r\n\t  return fetch(url+eraw)\r\n\t    .then(response => response.json()) //same as function(response){return response.json()}\r\n\t    .then((json)=>{\r\n\t    \tlet res =json.results\r\n\t    \tconsole.log(res)\r\n\t    \tconsole.log(typeof(res))\r\n\t      if(res.length==0){\r\n\r\n\t      \t res.push({formatted_address: 'none found - search again'})\r\n\t      }\r\n\t      dispatch(recAddr(res))\r\n\t    })\t\t\r\n\t}\r\n}\r\n\r\nconst setUnverSel =(unver_sel)=>{\r\n\treturn {\r\n\t\ttype: 'SET_UNVER_SEL',\r\n\t\tunver_sel\r\n\t}\t\r\n}\r\nconst setVerSel =(idx)=>{\r\n\treturn {\r\n\t\ttype: 'SET_VER_SEL',\r\n\t\tidx\r\n\t}\t\r\n}\r\n\r\nconst recUnverified = (unverified) => {\r\n\t//console.log(unverified)\r\n\treturn {\r\n\t\ttype: 'REC_UNVERIFIED',\r\n\t\tunverified\r\n\t}\r\n}\r\n\r\nconst postUnverCompl =(done)=>{\r\n\treturn {\r\n\t\ttype: 'POST_UNVER_COMPL',\r\n\t\tdone\r\n\t}\r\n}\r\nconst postUnverReq =(done)=>{\r\n\treturn {\r\n\t\ttype: 'POST_UNVER_REQ',\r\n\t\tdone\r\n\t}\r\n}\r\n\r\nconst fetchUnverified = () => {\r\n\treturn dispatch => {\r\n\t  const url = `http://10.0.1.106:3036/api/hrs/verify-addr`\r\n\t  //console.log(url)\r\n\t  return fetch(url)\r\n\t    .then(response => response.json()) //same as function(response){return response.json()}\r\n\t    .then((json)=>{\r\n\t    \tlet unverified = json.map((j)=>\r\n\t    \t\tObject.assign({}, j)\r\n\t    \t)\r\n\t    \t//console.log(unverified)\r\n\t      dispatch(recUnverified(unverified))\r\n\t    })\t\t\r\n\t}\r\n}\r\n\r\nconst fetchVerified = () => {\r\n\treturn dispatch => {\r\n\t  const url = `http://10.0.1.104:3036/api/hrs/verify-addr/ver`\r\n\t  //console.log(url)\r\n\t  return fetch(url)\r\n\t    .then(response => response.json()) //same as function(response){return response.json()}\r\n\t    .then((json)=>{\r\n\t    \tconst verified=[]\r\n\t    \tjson.forEach((j)=>{\r\n\t    \t\tverified[j.id]=j\t\r\n\t    \t})\r\n\t      dispatch(recVerified(verified))\r\n\t    })\t\t\r\n\t}\r\n}\r\n\r\nconst recVerified = (verified) => {\r\n\t//console.log(verified)\r\n\treturn {\r\n\t\ttype: 'REC_VERIFIED',\r\n\t\tverified\r\n\t}\r\n}\r\n\r\nconst postUnverified =(unver_sel)=>{\r\n\treturn dispatch => { \r\n\t\tvar done = false\r\n\t\tdispatch(postUnverReq(done))\r\n\t\tconst id = unver_sel.id\r\n\t\tconst body = Object.assign({}, unver_sel)\r\n\t\tdelete body.isTheDev\r\n\t\tdelete body.isThePlace\r\n\t\tdelete body.idx\r\n\t\tdelete body.id\r\n\t\tbody.veri =1\r\n\t\tconsole.log(id)\r\n\t\tconsole.log(body)\r\n\t\tconst url = `http://10.0.1.104:3036/api/hrs/verify-addr/`+id\r\n\t\treturn superagent\r\n\t\t\t.put(url)\r\n\t\t\t.send(body)\r\n\t\t\t.end(function(e,res){\r\n\t\t\t\tconsole.log(res.body)\r\n\t\t\t\tif(res.body&&res.body.affectedRows==1){\r\n\t\t\t\t\tdone = true\r\n\t\t\t\t\tconsole.log(done)\r\n\t\t\t\t}\r\n\t\t\t\tdispatch(postUnverCompl(done))\r\n\t\t\t})\r\n\t\t\t// return {\r\n\t\t\t// \ttype: 'POST_UNVERIFIED',\r\n\t\t\t// \tdone: done\r\n\t\t\t// }\r\n\t}\t\r\n}\r\n\r\nexport {fetchAddr, selAddr, recAddr, fetchUnverified, setUnverSel, \r\n\tpostUnverCompl, postUnverified, postUnverReq, setDone,\r\n\tfetchVerified, setVerSel\r\n\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/actions/verify.js\n **/"],"sourceRoot":""}